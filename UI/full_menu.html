<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fast-Food-Fast - Full Menu</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/order.css">
    <link rel="stylesheet" href="./css/history.css">
    <link rel="stylesheet" href="./css/menu.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="./images/favicon.png"/>
</head>
<body>
    <header>
        <section class="navigation">
            <div class="nav-container">
            <div class="brand" id="brand">
                <a href="index.html">Fast-Food-Fast</a>`;
            </div>
            <nav>
                <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
                <ul class="nav-list" id="nav-list">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="#!">Food</a>
                        <ul class="nav-dropdown">
                            <li>
                                <a href="#main-dish">Main Meals</a>
                            </li>
                            <li>
                                <a href="#snacks">BreakFast</a>
                            </li>
                            <li>
                                <a href="#snacks">Desserts</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#!">Beverages</a>
                        <ul class="nav-dropdown">
                            <li>
                                <a href="#drinks">Hot</a>
                            </li>
                            <li>
                                <a href="#drinks">Cold</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#!">About</a>
                    </li>
                    <li>
                        <a href="#!">Contact</a>
                    </li>
                    <script type="text/javascript">
                            navList = document.getElementById('nav-list');
                            token = localStorage.getItem('token')
                            if (token){
                                tokenData = JSON.parse(atob(token.split('.')[1]))
                                console.log(Date.now() / 1000)
                                if (tokenData.exp < Date.now() / 1000) { 
                                    localStorage.setItem('loggedIn',false)
                                }
                                if (localStorage.getItem('loggedIn') == "true"){
                                    let li = document.createElement('li');
                                    let a = document.createElement('a');
                                    a.setAttribute('href', '#!')
                                    aText = document.createTextNode('Account')
                                    a.appendChild(aText)
    
                                    let ul = document.createElement('ul');
                                    ul.setAttribute('class', 'nav-dropdown')
    
                                    let ulLi = document.createElement('li')
                                    let ulLiA = document.createElement('a')
                                    ulLiA.setAttribute('href', 'order.html')
                                    let ulLiAText = document.createTextNode('Cart')
                                    ulLiA.appendChild(ulLiAText)
                                    ulLi.appendChild(ulLiA)
    
                                    let ulLi2 = document.createElement('li')
                                    let ulLiA2 = document.createElement('a')
                                    ulLiA2.setAttribute('href', 'history.html')
                                    let ulLiA2Text = document.createTextNode('History')
                                    ulLiA2.appendChild(ulLiA2Text)
                                    ulLi2.appendChild(ulLiA2)
    
                                    ulLi3 = document.createElement('li')
                                    ulLiA3 = document.createElement('a')
                                    ulLiA3.setAttribute('href', "#")
                                    let ulLiA3Text = document.createTextNode("Profile")
                                    ulLiA3.appendChild(ulLiA3Text)
                                    ulLi3.appendChild(ulLiA3)
    
                                    ulLi4 = document.createElement('li')
                                    ulLiA4 = document.createElement('a')
                                    ulLiA4.setAttribute('href', '')
                                    ulLiA4.setAttribute('id', 'signOut')
                                    ulLiA4.setAttribute('onclick', 'logout();')
                                    let ulLiA4Text = document.createTextNode("Sign Out")
                                    ulLiA4.appendChild(ulLiA4Text)
                                    ulLi4.appendChild(ulLiA4)
                                    ul.appendChild(ulLi)
                                    ul.appendChild(ulLi2)
                                    ul.appendChild(ulLi3)
                                    ul.appendChild(ulLi4)
                                    li.appendChild(a)
                                    li.appendChild(ul)
                                    navList.appendChild(li)
                                }
                                if (localStorage.getItem('loggedIn') == "false"){
                                    let li = document.createElement('li');
                                    let a = document.createElement('a');
                                    a.setAttribute('href', 'login.html')
                                    let aText = document.createTextNode('Login')
                                    a.appendChild(aText)
                                    li.appendChild(a)
                                    navList.appendChild(li)
                                }
                            }
                            else{
                                let li = document.createElement('li');
                                let a = document.createElement('a');
                                a.setAttribute('href', 'login.html')
                                let aText = document.createTextNode('Login')
                                a.appendChild(aText)
                                li.appendChild(a)
                                navList.appendChild(li)
                            }
                            
                        </script>
                </ul>
            </nav>
            </div>
        </section>
    </header>
    <div class="wrapper">
        <div id="header">
            <h2>Fast-Foood-Fast Full Menu</h2>
        </div>
        <div class="category_title" id="title"><h3>Snacks</h3></div>
        <table class="orders" id="snacks">
            <tr>
                <th>Image</th>
                <th>Item</th>
                <th>Price</th>
                <th>Action</th>
            </tr>      
        </table>
        <div class="category_title"><h3>Main Dish</h3></div>
        <table class="orders" id="main-dish">
            <tr>
                <th>Image</th>
                <th>Item</th>
                <th>Price</th>
                <th>Action</th>
            </tr>
        </table>
        <div class="category_title"><h3>Drinks</h3></div>
        <table class="orders" id="drinks">
            <tr>
                <th>Image</th>
                <th>Item</th>
                <th>Price</th>
                <th>Action</th>
            </tr>
        </table>
        
    </div>

    <footer>
        <p>Fast-Food-Fast Ltd, Copyright &copy; 2018</p>
    </footer>

<script src="./js/main.js" type="text/javascript"></script>
<script src="./js/fetchFullMenu.js" text="text/javasript"></script>
<script src="./js/postOrder.js" text="text/javasript"></script>
<script src="./js/logout.js" type="text/javascript"></script>
</body>
</html>